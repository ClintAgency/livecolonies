const url="https://app.livecolonies.com/graphql",loadMore=(l,e,i,s="block")=>{const g=l.length;l=Array.from(l),l.forEach(y=>{y.style.display="none",y.style.opacity=0}),g<e&&(i.style.display="none"),l.slice(0,e).forEach(y=>{y.style.display=s,y.style.opacity=1}),i.addEventListener("click",y=>{y.preventDefault();const t=l.filter(o=>o.style.display===s).length;l.slice(t-1,l.length).forEach(o=>{o.style.display=s,o.style.opacity=1,o.style.transition="opacity 3s ease-in-out"}),l.filter(o=>o.style.display===s).length>=g&&(i.style.display="none")})},queryFetch=async(l,e)=>await(await fetch(url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:l,variables:e})})).json(),removeDecimalsFromPrice=l=>l.split(".")[1]==="00"?l.split(".")[0].replace(".",""):l,mapStyled=[{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#00426a"},{saturation:"-75"},{lightness:"30"}]},{featureType:"landscape",elementType:"labels.text.fill",stylers:[{color:"#00426a"},{saturation:"-27"},{lightness:"22"}]},{featureType:"landscape.man_made",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"landscape.natural",elementType:"geometry.fill",stylers:[{color:"#0076a8"},{lightness:"90"},{saturation:"-80"},{gamma:"1.00"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels",stylers:[{weight:"0.01"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#00426a"},{lightness:"47"},{saturation:"-75"}]},{featureType:"road",elementType:"labels.icon",stylers:[{weight:"0.01"},{lightness:"36"},{saturation:"-59"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#0076a8"},{weight:"1.00"},{lightness:"45"},{saturation:"-67"}]},{featureType:"road.highway",elementType:"labels.icon",stylers:[{saturation:"-62"},{visibility:"simplified"},{gamma:"0.66"},{hue:"#0075ff"},{lightness:"17"}]},{featureType:"road.arterial",elementType:"geometry.fill",stylers:[{color:"#0076a8"},{lightness:"63"},{saturation:"-76"},{weight:"2"}]},{featureType:"road.local",elementType:"all",stylers:[{visibility:"simplified"},{color:"#0076a8"},{lightness:"66"},{saturation:"-81"}]},{featureType:"transit.station",elementType:"geometry.fill",stylers:[{color:"#0076a8"},{lightness:"70"},{saturation:"-78"}]},{featureType:"transit.station",elementType:"geometry.stroke",stylers:[{lightness:"50"}]},{featureType:"transit.station",elementType:"labels.text",stylers:[{saturation:"-47"}]},{featureType:"water",elementType:"all",stylers:[{color:"#0076a8"},{visibility:"on"},{lightness:"58"},{saturation:"-44"},{gamma:"0.87"}]}],getResidencesByCity=async(l,e)=>{const i=`query Residences($city: String, $locale: Locale) {
    residences(city: $city, locale: $locale) {
      id
      address {
        city
      }
      coliving
      latitude
      longitude
      minPrice
      name
      numberOfHousingUnits
      primaryPhotoUrl
      size
      vacancies
    }
  }
  `,s=document.querySelector(".city-rooms #residence-grid"),g=document.querySelector(".city-studios #residence-grid"),y=await queryFetch(i,{city:l,locale:e}),{data:{residences:t}}=y;if(t.length===0){const c=new URL(window.location.href);window.location.href=`${c.origin}/notfound`}t.sort((c,f)=>c.vacancies<f.vacancies?1:-1).map(c=>{const f=c.coliving?"single-house":"studio",r=document.querySelector(".residence-city-mock").cloneNode(!0);r.classList.remove("residence-city-mock"),r.classList.add("residence-city-block"),r.setAttribute("href",`${f}?id=${c.id}&city=${l}`),r.querySelector(".residence-city-name").textContent=c.name,r.querySelector(".residence-city-city").textContent=c.address.city,r.querySelector(".residence-city-area").textContent=c.size,r.querySelector(".residence-city-photo").setAttribute("srcset",c.primaryPhotoUrl),r.querySelector(".residence-city-photo").setAttribute("alt",c.name),r.querySelector(".residence-city-hover-name").innerHTML=`&nbsp; ${c.name}`,r.querySelector(".residence-city-discover").textContent=e==="FR"?"D\xE9couvrir":"Discover",c.coliving===!0&&(r.querySelector(".residence-city-room").textContent=c.numberOfHousingUnits),r.querySelector(".residence-city-price").textContent=removeDecimalsFromPrice(c.minPrice.replace("\u20AC","")),r.querySelector(".cities-block-badge").textContent=c.vacancies?e==="FR"?"Disponible":"Available":e==="FR"?"Sur liste d'attente":"On waiting list",r.querySelector(".cities-block-badge").classList.remove("badge-available"),r.querySelector(".cities-block-badge").classList.add(c.vacancies?"badge-available":"badge-occupied"),c.coliving===!0&&s.appendChild(r),c.coliving===!1&&g.appendChild(r)}),document.querySelector(".residence-city-rooms-number").textContent=t.filter(c=>c.coliving===!0).length,g&&(document.querySelector(".residence-city-studios-number").textContent=t.filter(c=>c.coliving===!1).length,loadMore(document.querySelectorAll(".city-studios .residence-city-block"),4,document.querySelector(".residence-city-studios-loadmore"))),loadMore(document.querySelectorAll(".city-rooms #residence-grid .residence-city-block"),4,document.querySelector(".residence-city-rooms-loadmore")),document.querySelectorAll(".residence-city-mock").forEach(c=>c.remove()),document.querySelectorAll(".city-pair").forEach(c=>c.remove()),document.querySelectorAll(".city-studios .city-icon-rooms").forEach(c=>c.remove());const p="https://uploads-ssl.webflow.com/603fd7f75447dd2fb0cab4e8/60468e47edb8e4eec4010c08_city-map-pin.svg",o=document.querySelector(".city-popin");(()=>{const c=r=>{if(r==="Paris")return{lat:48.856613,lng:2.352222};if(r==="Lille")return{lat:50.62925,lng:3.057256};if(r==="Marseille")return{lat:43.296482,lng:5.36978};if(r==="Berlin")return{lat:52.520008,lng:13.404954}},f=new google.maps.Map(document.querySelector("#map"),{zoom:11,center:new google.maps.LatLng(c(l)),mapTypeId:google.maps.MapTypeId.ROADMAP,styles:mapStyled}),d=[];google.maps.event.addListener(f,"click",()=>{d.forEach(r=>r.close())}),t.forEach(r=>{const v=r.coliving?"single-house":"studio",h=o.cloneNode(!0);h.querySelector(".city-link-block").setAttribute("href",`${v}?id=${r.id}&city=${l||"Paris"}`),h.querySelector("img").setAttribute("srcset",r.primaryPhotoUrl),h.querySelector(".h2").textContent=r.name,h.querySelector(".pin-price").textContent=removeDecimalsFromPrice(r.minPrice.replace("\u20AC","")),h.querySelector(".pin-room").textContent=r.numberOfHousingUnits,h.querySelector(".city-city").textContent=r.address.city,h.querySelector(".pin-area").textContent=r.size;const q=new google.maps.Marker({position:{lat:r.latitude,lng:r.longitude},map:f,icon:p,draggarble:!1});google.maps.event.addListener(q,"click",()=>{d.forEach(w=>w.close());const S=new google.maps.InfoWindow;d.push(S),S.setContent(h.innerHTML),S.open(f,q)})})})(),document.querySelector(".loader").style.transition="opacity 0.5s ease",document.querySelector(".loader").style.opacity="0",setTimeout(()=>{document.querySelector(".loader").remove()},500)};class Lightbox{static init(e,i){e.addEventListener("click",s=>{s.preventDefault(),new Lightbox(i)})}constructor(e){this.images=e,this.element=this.buildDOM(e[0]),this.loadImage(e[0]),this.onKeyUp=this.onKeyUp.bind(this),document.body.appendChild(this.element),document.addEventListener("keyup",this.onKeyUp)}loadImage(e){this.url=null;const i=new Image,s=this.element.querySelector(".lightbox__container"),g=document.createElement("div");g.classList.add("lightbox__loader"),s.innerHTML="",s.appendChild(g),i.onload=()=>{s.removeChild(g),s.appendChild(i),this.url=e},i.src=e}close(e){e.preventDefault(),this.element.classList.add("fadeOut"),window.setTimeout(()=>{this.element.remove()},500),document.removeEventListener("keyup",this.onKeyUp)}onKeyUp(e){e.key==="Escape"&&this.close(e),e.key==="ArrowLeft"&&this.prev(e),e.key==="ArrowRight"&&this.next(e)}prev(e){e.preventDefault();let i=this.images.findIndex(s=>s===this.url);i===0&&(i=this.images.length),this.loadImage(this.images[i-1])}next(e){e.preventDefault();let i=this.images.findIndex(s=>s===this.url);i===this.images.length-1&&(i=-1),this.loadImage(this.images[i+1])}buildDOM(e){const i=document.createElement("div");return i.classList.add("lightbox"),i.innerHTML=`
					<button class="lightbox__close"></button>
					<div class="lightbox__container"></div>
		`,this.images.length>1&&(i.innerHTML+=`
			<button class="lightbox__next"></button>
			<button class="lightbox__prev"></button>
			`,i.querySelector(".lightbox__next").addEventListener("click",this.next.bind(this)),i.querySelector(".lightbox__prev").addEventListener("click",this.prev.bind(this))),i.querySelector(".lightbox__close").addEventListener("click",this.close.bind(this)),i}}class Carousel{constructor(e,i={},s,g){this.element=e,this.nextButton=g,this.prevButton=s,this.options=Object.assign({},{slidesToScroll:1,slidesVisible:1},i);let y=[].slice.call(e.children);this.isMobile=!0,this.currentItem=0,this.root=this.createDivWithClass("carousel"),this.container=this.createDivWithClass("carousel__container"),this.root.appendChild(this.container),this.element.appendChild(this.root),this.items=y.map(t=>{let p=this.createDivWithClass("carousel__item");return p.appendChild(t),this.container.appendChild(p),p}),this.setStyle(),this.createNavigation(),this.onWindowResize(),window.addEventListener("resize",this.onWindowResize.bind(this))}setStyle(){let e=this.items.length/this.slidesVisible;this.container.style.width=e*100+"%",this.items.forEach(i=>i.style.width=100/this.slidesVisible/e+"%")}createNavigation(){this.nextButton.addEventListener("click",this.next.bind(this)),this.prevButton.addEventListener("click",this.prev.bind(this))}next(){this.goToItem(this.currentItem+this.slidesToScroll)}prev(){this.goToItem(this.currentItem-this.slidesToScroll)}goToItem(e){e<0&&(e=this.items.length-1),e>=this.items.length&&(e=0);let i=e*-100/this.items.length;this.container.style.transform=`translate3d(${i}%, 0, 0)`,this.currentItem=e}createDivWithClass(e){const i=document.createElement("div");return i.classList.add(e),i}onWindowResize(){let e=window.innerWidth<=982;e!==this.isMobile&&(this.isMobile=e,this.setStyle())}get slidesToScroll(){return this.isMobile?1:this.options.slidesToScroll}get slidesVisible(){return this.isMobile?1:this.options.slidesVisible}}const getResidencesByCitySingle=async(l,e,i)=>{const g=await queryFetch(`query Residences($city: String, $locale: Locale) {
		residences(city: $city, locale: $locale) {
			id
			address {
				city
				country
				line1
				postalCode
				state
			}
			amenities {
				name
				quantity
				shared
				size
				space
			}
			vacancies
			coliving
			latitude
			longitude
			seoMetaDesc
			seoTitleDesc
			marketingDesc
			marketingPlans
			minPrice
			name
			neighborhoodDesc
			numberOfHousingUnits
			photos
			primaryPhotoUrl
			size
			transportDesc
			virtualTourUrl
		}
	}
	`,{city:e,locale:i}),{data:{residences:y}}=g;if(y.length===0){const n=new URL(window.location.href);window.location.href=`${n.origin}/notfound`}const t=y.find(n=>n.id===l);document.title=t.seoTitleDesc,document.querySelector('meta[property="og:title"]').content=t.seoTitleDesc,document.querySelector('meta[property="twitter:title"]').content=t.seoTitleDesc,document.querySelector('meta[name="description"]').content=t.seoMetaDesc,document.querySelector('meta[property="og:description"]').content=t.seoMetaDesc,document.querySelector('meta[property="twitter:description"]').content=t.seoMetaDesc,document.querySelector('meta[property="og:image"]').content=t.primaryPhotoUrl,document.querySelector('meta[property="twitter:image"]').content=t.primaryPhotoUrl;const p=document.querySelector(".residence-single-hero-card-mock");if(p.querySelector(".residence-single-hero-card-name").textContent=t.name,p.querySelector(".residence-single-hero-card-city").textContent=t.address.city,p.querySelector(".residence-single-hero-card-area").textContent=t.size,p.querySelector(".residence-single-hero-card-room")!==null&&(p.querySelector(".residence-single-hero-card-room").textContent=t.numberOfHousingUnits),p.querySelector(".residence-single-hero-card-price").textContent=removeDecimalsFromPrice(t.minPrice.replace("\u20AC","")),t.coliving===!1&&t.address.country==="DE"){const n=parseInt(t.minPrice.replace("\u20AC","").replace(",",""));p.querySelector("a.cta").setAttribute("href",`https://colonies.typeform.com/to/NHXEjFQ9#residence=${t.name}&availability=${t.vacancies?"no":"yes"}&price=${n}&language=${i}`)}const o=document.querySelectorAll(".residence-single-slide");o[0].querySelector("img").setAttribute("srcset",t.photos[0]),o[1].querySelector("img").setAttribute("srcset",t.photos[1]),o[2].querySelector("img").setAttribute("srcset",t.photos[2]),o[3].querySelector("img").setAttribute("srcset",t.photos[3]),o[4].querySelector("img").setAttribute("srcset",t.photos[4]),o[5].querySelector("img").setAttribute("srcset",t.photos[5]);const b=document.querySelector(".residence-single-equipement-grid");t.amenities.map(n=>{const m=document.querySelector(".single-house-equipement").cloneNode(!1);m.classList.remove("residence-single-equipement"),m.textContent=n.name,b.appendChild(m)}),document.querySelectorAll(".residence-single-equipement").forEach(n=>n.remove()),document.querySelector(".residence-single-photo-name").textContent=t.name,document.querySelector(".residence-single-gallery-number").textContent=`+${t.photos.length-6}`,t.photos.map((n,u)=>{const m=document.querySelector(`.residence-single-galerie-img-${u}`),T=document.querySelector(`.residence-single-slider-img-${u}`);T&&T.querySelector(".img-100pc-100pc").setAttribute("srcset",n),m&&m.querySelector(".img-100pc-100pc").setAttribute("srcset",n)});const c=document.querySelector(".residence-single-gallery-lightbox");Lightbox.init(c,t.photos),t.virtualTourUrl===null?document.querySelector(".section.single-house-virtual-tour").remove():(document.querySelector(".single-house-virtual-tour-img").setAttribute("srcset",t.primaryPhotoUrl),document.querySelector(".single-house-virtualtour").addEventListener("click",n=>{n.preventDefault();const u=document.createElement("iframe");u.setAttribute("src",t.virtualTourUrl),u.setAttribute("frameborder","0"),u.width="100%",u.height="100%",u.className="single-house-photo-hover-layer virtual-tour",n.target.innerHTML="",n.target.appendChild(u)})),document.querySelector(".residence-single-description-image").setAttribute("srcset",t.primaryPhotoUrl);const f=document.querySelector(".residence-single-description-richtext");f.innerHTML=t.marketingDesc,document.querySelector(".residence-single-address").textContent=`${t.address.line1}, ${t.address.postalCode} ${t.address.city}`,e==="Berlin"&&document.querySelector(".residence-single-address").remove();const d="https://uploads-ssl.webflow.com/603fd7f75447dd2fb0cab4e8/60468e47edb8e4eec4010c08_city-map-pin.svg";(()=>{const n=new google.maps.Map(document.querySelector("#map"),{zoom:16,center:new google.maps.LatLng(t.latitude,t.longitude),mapTypeId:google.maps.MapTypeId.ROADMAP,styles:mapStyled}),u=new google.maps.Marker({position:{lat:t.latitude,lng:t.longitude},map:n,icon:d,draggarble:!1})})();const v=document.querySelector(".residence-single-alentours-richtext");v.innerHTML=t.neighborhoodDesc;const h=document.querySelector(".residence-single-transport-richtext");h.innerHTML=t.transportDesc;const q=document.querySelector(".hidden-from-landscape .city-link-block.white"),S=window.innerWidth>768?document.querySelector("#button-left-residences"):document.querySelector("#button-left-residences-m"),w=window.innerWidth>768?document.querySelector("#button-right-residences"):document.querySelector("#button-right-residences-m"),C=document.querySelector("#carousel"),a=y.filter(n=>n!=t).filter(n=>t.coliving===!0?n.coliving:!n.coliving).sort((n,u)=>n.vacancies<u.vacancies?1:-1).map(n=>{const u=n.coliving?"single-house":"studio",m=q.cloneNode(!0);m.style.marginRight="32px",m.setAttribute("href",`${u}?id=${n.id}&city=${e}`),m.querySelector("img").setAttribute("srcset",n.primaryPhotoUrl),m.querySelector(".residence-other-name").textContent=n.name,m.querySelector(".residence-other-price").textContent=removeDecimalsFromPrice(n.minPrice.replace("\u20AC","")),m.querySelector(".residence-other-city").textContent=n.address.city,n.coliving===!0&&m.querySelector(".residence-other-room")!==void 0&&(m.querySelector(".residence-other-room").textContent=n.numberOfHousingUnits),m.querySelector(".residence-other-area").textContent=n.size,m.querySelector(".cities-block-badge").textContent=n.vacancies?i==="FR"?"Disponible":"Available":i==="FR"?"Sur liste d'attente":"On waiting list",m.querySelector(".cities-block-badge").classList.remove("badge-available"),m.querySelector(".cities-block-badge").classList.add(n.vacancies?"badge-available":"badge-occupied"),C.appendChild(m)});return new Carousel(C,{slidesToScroll:2,slidesVisible:2},S,w),document.querySelectorAll(".slider-mock").forEach(n=>n.remove()),a.length===0&&document.querySelector(".section.single-house-autres-residences").remove(),t},getRoomsByResidenceId=async(l,e,i)=>{const s=await i,y=await queryFetch(`query HousingUnits($residenceId: ID!, $locale: Locale) {
		housingUnits(residenceId: $residenceId, locale: $locale) {
			amenities {
				name
				quantity
				shared
				size
				space
			}
			floor
			marketingDesc
			maxCapacity
			photos
			price
			size
			status
			unitNumber
			unitType
		}
	}
`,{residenceId:l,locale:e});if(y.data===null)return;const{data:{housingUnits:t}}=y;if(t.length===0){const o=new URL(window.location.href);window.location.href=`${o.origin}/notfound`}const p=document.querySelector(".residence-single-room-grid");t.sort((o,b)=>o.status>b.status?1:-1).filter(o=>o.status!=="unavailable").map((o,b)=>{const c=document.querySelector(".residence-single-room-mock-odd"),f=document.querySelector(".residence-single-room-mock-even"),d=b%2==0?c.cloneNode(!0):f.cloneNode(!0);if(d.querySelector(".available").className=o.status==="occupied"?"occupied":"available",d.querySelector(".residence-single-room-status").textContent=o.status==="occupied"?e==="FR"?"Occup\xE9":"Occupied":e==="FR"?"Disponible":"Available",d.querySelector(".residence-single-room-name").textContent=`${o.unitType} n\xB0${o.unitNumber}`,d.querySelector(".residence-single-room-capacity").textContent=o.maxCapacity,d.querySelector(".residence-single-room-area").textContent=o.size,d.querySelector(".residence-single-room-floor").textContent=o.floor,d.querySelector(".residence-single-room-price").textContent=removeDecimalsFromPrice(o.price.replace("\u20AC","")),d.querySelector(".residence-single-room-description").textContent=o.marketingDesc,d.querySelector(".residence-single-room-slider img").setAttribute("srcset",o.photos[0]),d.classList.remove("residence-single-room-mock-odd"),d.classList.remove("residence-single-room-mock-even"),s.marketingPlans.length===0||s.coliving===!1){const a=d.querySelector(".single-house-icon-plan");a&&a.remove()}else Lightbox.init(d.querySelector(".single-house-icon-plan"),s.marketingPlans);Lightbox.init(d.querySelector(".residence-single-room-slider"),o.photos);const r=d.querySelector(".button");o.status==="occupied"&&(r.textContent=e==="FR"?"Rejoindre la liste d'attente":"Join the waiting list",r.classList.remove("button-available"),r.classList.add("button-occupied"));const v=a=>{if(s.coliving&&a==="FR")return"P9AiLTlp";if(s.coliving&&a==="DE")return"Ec826muF"},h=parseInt(o.price.replace("\u20AC","").replace(",","")),q=new URL(`https://colonies.typeform.com/to/${v(s.address.country)}#residence=${s.name}`),S=new URLSearchParams;S.append("unit",`${o.unitType} ${o.unitNumber}`),S.append("availability",o.status==="occupied"?"no":"yes"),S.append("price",h),S.append("language",e),q.search=S.toString(),r.setAttribute("href",q.href);const w=d.querySelector(".residence-single-room-equipement-grid"),C=d.querySelector(".residence-single-bathroom-equipement-grid");o.amenities.filter(a=>a.space==="Bathroom").map(a=>{const u=d.querySelector(".single-house-equipement").cloneNode(!1);u.classList.remove("residence-single-bathroom-equipement"),a.shared===!1&&(u.textContent=e==="FR"?a.name==="Douche"?`${a.name} priv\xE9e`:`${a.name} priv\xE9es`:`Private ${a.name}`),a.shared===!0&&(u.textContent=e==="FR"?a.name==="Douche"?`${a.name} partag\xE9e`:`${a.name} partag\xE9es`:`Shared ${a.name}`),C.appendChild(u)}),o.amenities.filter(a=>(a.space==="Room"||a.space==="Kitchen")&&a.shared===!1).sort((a,n)=>a.space<n.space?1:-1).map(a=>{const u=d.querySelector(".single-house-equipement.white").cloneNode(!1);u.classList.remove("residence-single-room-equipement"),u.textContent=a.name,w.appendChild(u)}),d.querySelectorAll(".residence-single-room-equipement").forEach(a=>a.remove()),d.querySelectorAll(".residence-single-bathroom-equipement").forEach(a=>a.remove()),p.appendChild(d)}),s.coliving&&(document.querySelector(".residence-single-room-number").textContent=s.numberOfHousingUnits),document.querySelectorAll(".residence-single-room-mock-odd").forEach(o=>o.remove()),document.querySelectorAll(".residence-single-room-mock-even").forEach(o=>o.remove()),loadMore(document.querySelectorAll(".residence-single-room-odd, .residence-single-room-even"),4,document.querySelector(".residence-single-loadmore"),"grid"),document.querySelector(".loader").style.transition="opacity 0.5s ease",document.querySelector(".loader").style.opacity="0",setTimeout(()=>{document.querySelector(".loader").remove()},500)};window.getResidencesByCity=getResidencesByCity,window.getResidencesByCitySingle=getResidencesByCitySingle,window.getRoomsByResidenceId=getRoomsByResidenceId;function init(){let l=Weglot.getCurrentLang().toUpperCase();const e=new URLSearchParams(window.location.search).get("id"),i=new URLSearchParams(window.location.search).get("city");if(e&&i&&l){const s=getResidencesByCitySingle(e,i,l);getRoomsByResidenceId(e,l,s)}if(window.city)try{getResidencesByCity(window.city,l)}catch(s){setTimeout(function(){getResidencesByCity(window.city,l)},1e3)}if(l==="EN"){const s=document.querySelector("#w-dropdown-list-0 a");s.href="https://www.livecolonies.com"}}$(document).ready(function(){Weglot.initialized?init():Weglot.on("initialized",function(){init()})});
